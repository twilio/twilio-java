/*
 * This code was generated by
 * ___ _ _ _ _ _    _ ____    ____ ____ _    ____ ____ _  _ ____ ____ ____ ___ __   __
 *  |  | | | | |    | |  | __ |  | |__| | __ | __ |___ |\ | |___ |__/ |__|  | |  | |__/
 *  |  |_|_| | |___ | |__|    |__| |  | |    |__] |___ | \| |___ |  \ |  |  | |__| |  \
 *
 * Twilio - Flex
 * This is the public Twilio REST API.
 *
 * NOTE: This class is auto generated by OpenAPI Generator.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package com.twilio.rest.flexapi.v1;

import com.twilio.base.Creator;
import com.twilio.base.TwilioResponse;
import com.twilio.constant.EnumConstants;
import com.twilio.constant.EnumConstants.ParameterType;
import com.twilio.converter.Serializer;
import com.twilio.exception.ApiConnectionException;
import com.twilio.exception.ApiException;
import com.twilio.exception.RestException;
import com.twilio.http.HttpMethod;
import com.twilio.http.Request;
import com.twilio.http.Response;
import com.twilio.http.TwilioRestClient;
import com.twilio.rest.Domains;
import com.twilio.type.*;
import java.math.BigDecimal;

public class AssessmentsCreator extends Creator<Assessments> {

    private String authorization;
    private String categorySid;
    private String categoryName;
    private String segmentId;
    private String agentId;
    private BigDecimal offset;
    private String metricId;
    private String metricName;
    private String answerText;
    private String answerId;
    private String questionnaireSid;

    public AssessmentsCreator(
        final String categorySid,
        final String categoryName,
        final String segmentId,
        final String agentId,
        final BigDecimal offset,
        final String metricId,
        final String metricName,
        final String answerText,
        final String answerId,
        final String questionnaireSid
    ) {
        this.categorySid = categorySid;
        this.categoryName = categoryName;
        this.segmentId = segmentId;
        this.agentId = agentId;
        this.offset = offset;
        this.metricId = metricId;
        this.metricName = metricName;
        this.answerText = answerText;
        this.answerId = answerId;
        this.questionnaireSid = questionnaireSid;
    }

    public AssessmentsCreator setCategorySid(final String categorySid) {
        this.categorySid = categorySid;
        return this;
    }

    public AssessmentsCreator setCategoryName(final String categoryName) {
        this.categoryName = categoryName;
        return this;
    }

    public AssessmentsCreator setSegmentId(final String segmentId) {
        this.segmentId = segmentId;
        return this;
    }

    public AssessmentsCreator setAgentId(final String agentId) {
        this.agentId = agentId;
        return this;
    }

    public AssessmentsCreator setOffset(final BigDecimal offset) {
        this.offset = offset;
        return this;
    }

    public AssessmentsCreator setMetricId(final String metricId) {
        this.metricId = metricId;
        return this;
    }

    public AssessmentsCreator setMetricName(final String metricName) {
        this.metricName = metricName;
        return this;
    }

    public AssessmentsCreator setAnswerText(final String answerText) {
        this.answerText = answerText;
        return this;
    }

    public AssessmentsCreator setAnswerId(final String answerId) {
        this.answerId = answerId;
        return this;
    }

    public AssessmentsCreator setQuestionnaireSid(
        final String questionnaireSid
    ) {
        this.questionnaireSid = questionnaireSid;
        return this;
    }

    public AssessmentsCreator setAuthorization(final String authorization) {
        this.authorization = authorization;
        return this;
    }

    private Response makeRequest(final TwilioRestClient client) {
        String path = "/v1/Insights/QualityManagement/Assessments";

        Request request = new Request(
            HttpMethod.POST,
            Domains.FLEXAPI.toString(),
            path
        );
        request.setContentType(EnumConstants.ContentType.FORM_URLENCODED);
        addHeaderParams(request);
        addPostParams(request);

        Response response = client.request(request);

        if (response == null) {
            throw new ApiConnectionException(
                "Assessments creation failed: Unable to connect to server"
            );
        } else if (!TwilioRestClient.SUCCESS.test(response.getStatusCode())) {
            RestException restException = RestException.fromJson(
                response.getStream(),
                client.getObjectMapper()
            );
            if (restException == null) {
                throw new ApiException(
                    "Server Error, no content",
                    response.getStatusCode()
                );
            }
            throw new ApiException(restException);
        }
        return response;
    }

    @Override
    public Assessments create(final TwilioRestClient client) {
        Response response = makeRequest(client);
        return Assessments.fromJson(
            response.getStream(),
            client.getObjectMapper()
        );
    }

    @Override
    public TwilioResponse<Assessments> createWithResponse(
        final TwilioRestClient client
    ) {
        Response response = makeRequest(client);
        Assessments content = Assessments.fromJson(
            response.getStream(),
            client.getObjectMapper()
        );
        return new TwilioResponse<>(
            content,
            response.getStatusCode(),
            response.getHeaders()
        );
    }

    private void addPostParams(final Request request) {
        if (categorySid != null) {
            Serializer.toString(
                request,
                "CategorySid",
                categorySid,
                ParameterType.URLENCODED
            );
        }

        if (categoryName != null) {
            Serializer.toString(
                request,
                "CategoryName",
                categoryName,
                ParameterType.URLENCODED
            );
        }

        if (segmentId != null) {
            Serializer.toString(
                request,
                "SegmentId",
                segmentId,
                ParameterType.URLENCODED
            );
        }

        if (agentId != null) {
            Serializer.toString(
                request,
                "AgentId",
                agentId,
                ParameterType.URLENCODED
            );
        }

        if (offset != null) {
            Serializer.toString(
                request,
                "Offset",
                offset,
                ParameterType.URLENCODED
            );
        }

        if (metricId != null) {
            Serializer.toString(
                request,
                "MetricId",
                metricId,
                ParameterType.URLENCODED
            );
        }

        if (metricName != null) {
            Serializer.toString(
                request,
                "MetricName",
                metricName,
                ParameterType.URLENCODED
            );
        }

        if (answerText != null) {
            Serializer.toString(
                request,
                "AnswerText",
                answerText,
                ParameterType.URLENCODED
            );
        }

        if (answerId != null) {
            Serializer.toString(
                request,
                "AnswerId",
                answerId,
                ParameterType.URLENCODED
            );
        }

        if (questionnaireSid != null) {
            Serializer.toString(
                request,
                "QuestionnaireSid",
                questionnaireSid,
                ParameterType.URLENCODED
            );
        }
    }

    private void addHeaderParams(final Request request) {
        if (authorization != null) {
            Serializer.toString(
                request,
                "Authorization",
                authorization,
                ParameterType.HEADER
            );
        }
    }
}
